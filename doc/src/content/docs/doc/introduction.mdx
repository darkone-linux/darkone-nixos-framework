---
title: Introduction
description: A multi-user, multi-host, ready-to-use NixOS configuration
sidebar:
  order: 1
---

import { FileTree } from '@astrojs/starlight/components';

Darkone NixOS Framework is a working base for a multi-user, multi-services and multi-host configuration.

- üî• [Declarative, reproducible, immutable](https://nixos.org/).
- üöÄ Ready-to-use [modules](https://darkone-linux.github.io/ref/modules/).
- ‚ùÑÔ∏è Simple [main configuration](https://github.com/darkone-linux/darkone-nixos-framework/blob/main/usr/config.yaml).
- üß© Consistent [structure](https://darkone-linux.github.io/doc/introduction/#structure).
- üåé A [full network](#one-configuration-a-full-network).

## Features

|   | Feature | Description |
|---|--------|-------------|
| ‚öôÔ∏è | Quick&nbsp;install | Fully automated host install with [nixos-anywhere](https://github.com/nix-community/nixos-anywhere) & [disko](https://github.com/nix-community/disko)<br />Fully automated host update with [colmena](https://github.com/zhaofengli/colmena) |
| üë§ | User profiles | User [profiles](https://github.com/darkone-linux/darkone-nixos-framework/tree/main/dnf/home/profiles) and [modules](https://darkone-linux.github.io/ref/modules/#home-manager-modules) with [Home Manager](https://github.com/nix-community/home-manager)<br /> Admin, Nix-Admin, Developer, Gamer, Student, Beginner, Child... |
| üñ•Ô∏è | Host&nbsp;profiles | [Profiles for hosts](https://darkone-linux.github.io/ref/modules/#-darkonehostdesktop) with the option to customize each one<br />Workstation, Laptop, Server, VM, Gateway, VPN Coordination... |
| üåê | Tailnet&nbsp;VPN | [Full-mesh VPN](https://en.wikipedia.org/wiki/Mesh_networking) with [headscale](https://headscale.net/) + [tailscale](https://tailscale.com/), [independent subnets](#one-configuration-fop-a-full-network) |
| üõ°Ô∏è | Ad-Free web | Secure, ad-free internet with [AdguardHome](https://adguard.com/fr/adguard-home/overview.html) and effective firewall |
| üß© | SSO | Authentication with [Kanidm](https://kanidm.com/): one identity for (almost) all services |
| ü§ó | Services | [Immich](https://immich.app/), [Nextcloud](https://nextcloud.com/), [Forgejo](https://forgejo.org/), [Vaultwarden](https://github.com/dani-garcia/vaultwarden), [Mattermost](https://mattermost.com/), [Jellyfin](https://jellyfin.org/), [etc.](https://darkone-linux.github.io/ref/modules/#-darkoneserviceadguardhome) |
| üíª | Clean&nbsp;Gnome | NixOS hosts with streamlined [GNOME UI](https://www.gnome.org/) + stable and useful apps |
| üíæ | Backups | Robust and widespread 3-2-1 backups with [Restic](https://restic.net/) |
| üè† | Homepage | [Automated homepage](#homepage-screenshot) -> quick access to all configured services |

## Specificities

|   | Specificity | Description |
|---|--------|-------------|
| ‚ùÑÔ∏è | Declarative&nbsp;&&nbsp;Immutable | Fully reproducible configuration based on [Nix / NixOS](https://nixos.org/) |
| üîë | Enhanced&nbsp;security | Simple and reliable security strategy with [sops-nix](https://github.com/Mic92/sops-nix) |
| üì¶ | High-level modules | [High-level NixOS modules](https://darkone-linux.github.io/ref/modules), easy to enable and use |
| üìê | Consistent&nbsp;architecture | [Extensible and scalable architecture](https://darkone-linux.github.io/doc/introduction/#structure) |
| ‚ú¥Ô∏è | Reverse proxy | Distributed services with [Caddy](https://github.com/caddyserver/caddy) proxies |
| üõú | Auto-networking | Zero-conf network plumbing with [dnsmasq](https://thekelleys.org.uk/dnsmasq/doc.html)  |

## Files organisation

Main folders:

- `dnf` -> **Framework**: tools + modules + profiles (users, hosts, themes)
- `usr` -> **Local project**: config, modules + profiles, machines, users
- `src` -> Generator and scripts for tools
- `var` -> Generated files and logs
- `doc` -> Framework documentation

### Layers

The lower layers serve the upper layers.

![DNF Project layers](../../../assets/layers.webp)

The configurations are also organized by category:

- **[Standard modules](/ref/modules/#standard-modules)**: Ready-to-use simple modules.
- **[Mixin modules](/ref/modules/#mixin-modules)**: Ready-to-use collections of modules.
- **[Home profiles](/doc/specifications/#create-a-user-profile-example)**: [Home Manager](https://github.com/nix-community/home-manager) configurations for each user profile.
- **[Tools & configurations](/doc/user-manual/#just-commands)**: Manage the generation and quality of Nix declarations.

### Structure

<FileTree collapsed={true}>
- flake.nix Main flake
- Justfile Project management with [just](/doc/user-manual/#just-commands)
- dnf/ Framework (modules & common files)
  - modules/ [Framework modules](/ref/modules/)
    - standard Standard nix modules
      - system/ System / Hardware configurations
      - console/ CLI applications
      - graphic/ X applications
      - service/ Daemons
      - admin/ Nix administration settings
      - user/ User management (not home)
    - mixin Mixin modules
      - host/ Host profiles (desktop, server...)
      - profile/ Host profiles (student, admin...)
  - home Home Manager configuration
    - modules/ HM Modules (features)
    - profiles/ admin, student, advanced...
- **usr/** Writable zone for local network project
  - config.yaml [Local configuration](/doc/specifications/#the-configuration-file) used by [the generator](/doc/specifications/#the-generator)
  - modules/ Local nixos modules, the same as `dnf/modules`
  - home/ Local HM conf, the same as `dnf/home`
  - secrets/ Local secrets file
    - secret.yaml SOPS secrets
  - machines/ Host specific confs (hardware, overload)
  - users/ User specific confs (stateVersion, overload)
- var/ Generated files
  - log/
  - generated/ [Generated nix files](/doc/specifications/#the-generator)
    - hosts.nix Hosts to deploy
    - users.nix Users to deploy
    - network.nix Local network configuration
- src/ Generator sources
- doc/ This documentation
</FileTree>

:::tip[This project evolves according to my needs]
If you'd like to be informed about upcoming versions, please let me know on [GitHub](https://github.com/darkone-linux/darkone-nixos-framework) or by subscribing to my [YouTube channel](https://www.youtube.com/@DarkoneLinux) (FR). Thank you!
:::
