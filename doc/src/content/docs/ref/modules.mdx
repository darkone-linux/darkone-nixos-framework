---
title: Modules
sidebar:
  order: 1
  badge:
    text: New
    variant: tip
---

## Mixin modules

:::note
**A mixin module** defines a collection of standard modules with a consistent common configuration.
:::

### &#x1F4E6; darkone.host.desktop

A full desktop configuration with gnome, multimedia and office tools.

* **enable** `bool` Desktop optimized host configuration
```nix
darkone.host.desktop.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.gateway

The main gateway / router of a local network zone.

:::tip[A ready-to-use gateway!]
The gateway is configured in `usr/config.yaml` file.
Additional enabled services (homepage, adguardhome, forgejo, ncps...)
are automatically configured with consistent network plumbing on the
gateway and all machines on the local network.
:::

* **enable** `bool` Enable gateway features for the current host (dhcp, dns, proxy, etc.)
* **enableFail2ban** `bool` Enable fail2ban service
* **enableAdguardhome** `bool` Enable pre-configured Aguard Home service
* **enableAuth** `bool` Enable authentication service (Authelia SSO)
* **enableUsers** `bool` Enable user management with LLDAP for DNF SSO
```nix
darkone.host.gateway = {
  enable = false;
  enableFail2ban = true;
  enableAdguardhome = builtins.hasAttr "adguardhome" host.services;
  enableAuth = builtins.hasAttr "auth" host.services;
  enableUsers = builtins.hasAttr "users" host.services;
}

```

<hr/>

### &#x1F4E6; darkone.host.hcs

The main headscale coordination server.

:::tip[A ready-to-use headscale server!]
The network is configured in `usr/config.yaml` file.
Additional enabled services (authentication, etc.)
are automatically configured with consistent network plumbing on your
global network.

Zsh alias "h" for "headscale".
:::

* **enable** `bool` Enable headscale coordination server
* **enableFail2ban** `bool` Enable fail2ban service
* **enableClient** `bool` Enable tailscale client on HCS node (recommande to host services)
* **enableAuth** `bool` Enable authentication service (Authelia SSO)
* **enableUsers** `bool` Enable user management with LLDAP for DNF SSO
```nix
darkone.host.hcs = {
  enable = false;
  enableFail2ban = true;
  enableClient = true;
  enableAuth = builtins.hasAttr "auth" host.services;
  enableUsers = builtins.hasAttr "users" host.services;
}

```

<hr/>

### &#x1F4E6; darkone.host.laptop

Desktop config + laptop specific tools & configuration.

* **enable** `bool` Laptop optimized host configuration
```nix
darkone.host.laptop.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.minimal

Every host configuration is based on this minimal config.

:::caution[Services declaration]
A number of services (immich, nextcloud, forgejo, etc.) can be declared in the configuration `usr/config.yaml`
of each host, regardless of its type (server, laptop, desktop, etc.). **It is advisable to declare them in the
yaml file so that the service is visible across the entire network!**
:::

* **enable** `bool` Minimal host configuration
* **secure** `bool` Prefer more secure options (disable mutable users...)
* **enableHomepage** `bool` Enable the auto-configured homepage service
* **enableForgejo** `bool` Enable pre-configured forgejo git forge service
* **enableImmich** `bool` Enable pre-configured immich service
* **enableNextcloud** `bool` Enable pre-configured nextcloud service
* **enableOpencloud** `bool` Enable pre-configured opencloud service
* **enableNetdata** `bool` Enable pre-configured Netdata service
* **enableMonitoring** `bool` Enable pre-configured monitoring service (prometheus, grafana)
* **enableVaultwarden** `bool` Enable pre-configured Vaultwarden service
* **enableSyncthing** `bool` Enable a syncthing server
* **enableMattermost** `bool` Enable a mattermost server
* **enableMatrix** `bool` Enable a matrix server
* **enableNfsHomeShares** `bool` Enable a DNF nfs home shares
* **enableJitsiMeet** `bool` Enable jitsi-meet service
* **enableNavidrome** `bool` Enable Navidrome service
* **enableKeycloak** `bool` Enable Keycloak service
* **enableRestic** `bool` Enable Restic service
* **enableBorg** `bool` Enable Borg service
```nix
darkone.host.minimal = {
  enable = false;
  secure = false;
  enableHomepage = attrsets.hasAttrByPath [ "services" "homepage" ] host;
  enableForgejo = attrsets.hasAttrByPath [ "services" "forgejo" ] host;
  enableImmich = attrsets.hasAttrByPath [ "services" "immich" ] host;
  enableNextcloud = attrsets.hasAttrByPath [ "services" "nextcloud" ] host;
  enableOpencloud = attrsets.hasAttrByPath [ "services" "opencloud" ] host;
  enableNetdata = attrsets.hasAttrByPath [ "services" "netdata" ] host;
  enableMonitoring = attrsets.hasAttrByPath [ "services" "monitoring" ] host;
  enableVaultwarden = attrsets.hasAttrByPath [ "services" "vaultwarden" ] host;
  enableSyncthing = attrsets.hasAttrByPath [ "services" "syncthing" ] host;
  enableMattermost = attrsets.hasAttrByPath [ "services" "mattermost" ] host;
  enableMatrix = attrsets.hasAttrByPath [ "services" "matrix" ] host;
  enableNfsHomeShares = attrsets.hasAttrByPath [ "services" "nfs" ] host;
  enableJitsiMeet = builtins.hasAttr "jitsi-meet" host.services;
  enableNavidrome = builtins.hasAttr "navidrome" host.services;
  enableKeycloak = builtins.hasAttr "keycloak" host.services;
  enableRestic = builtins.hasAttr "restic" host.services;
  enableBorg = builtins.hasAttr "borg" host.services;
}

```

<hr/>

### &#x1F4E6; darkone.host.portable

Portable configuration for a bootable USB drive containing a NixOS machine from the local network.

* **enable** `bool` Portable host configuration for usb keys
```nix
darkone.host.portable.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.server

Improved configuration for servers (minimal, no sleep, watchdog...).

:::caution[Emergency mode is disabled]
We prefer the system to attempt to continue booting so
that we can hopefully still access it remotely. (cf. srvos)
:::

* **enable** `bool` Server host minimal configuration
* **enableWatchdog** `bool` Enable systemd watchdog
```nix
darkone.host.server = {
  enable = false;
  enableWatchdog = true;
}

```

<hr/>

### &#x1F4E6; darkone.host.vm

Virtual machines guest tools.

* **enableVirtualbox** `bool` Virtualbox client
* **enableQemu** `bool` Qemu/KVM client
* **enableXen** `bool` Xen client
```nix
darkone.host.vm = {
  enableVirtualbox = false;
  enableQemu = false;
  enableXen = false;
}

```

<hr/>

### &#x1F4E6; darkone.profile.advanced

Profile for advanced users (computer scientists, developers, admins).

:::note[Host profile vs Home profile]
This module enables features for all users of the system.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Advanced user (admin sys, developper)
```nix
darkone.profile.advanced.enable = false;

```

<hr/>



## Standard modules

:::note
**A standard module** contains auto-configured features.
:::

### &#x1F48E; darkone.admin.nix

NixOS configuration for the local LAN administrator computer.

* **enable** `bool` Enable NIX configuration builder tools
* **enableNh** `bool` Enable nix helper (nh) management tool
```nix
darkone.admin.nix = {
  enable = false;
  enableNh = false;
}

```

<hr/>

### &#x1F48E; darkone.console.git

A pre-configured git environment.

:::tip[Git shortcuts]
- `git hdf` (history diff): select a commit to display diff.
- `git tree`: history tree.
- `git tre`: history with files.
- `git treee`: history with commit messages.
- `git hist`: tree alternative.
:::

* **enable** `bool` Pre-configured git environment
```nix
darkone.console.git.enable = false;

```

<hr/>

### &#x1F48E; darkone.console.pandoc

Pandoc with texlive and exiftool utils + gentium fonts.

* **enable** `bool` Pre-configured pandoc environment
```nix
darkone.console.pandoc.enable = false;

```

<hr/>

### &#x1F48E; darkone.console.zsh

A full zsh installation with aliases, bindkeys and optimized prompt.

:::tip[Some shortcuts]
General:
- `l`, `la`, `ll`: ls with options
- `vz`: vim + fzf
- `treef`: tree with files (eza)
- `treed`: tree only dirs (eza)

For nix/dnf admin profile:
- `nx`: cd /etc/nixos
- `nf`: nixfmt
- `nc`: deadnix
- `dnf`: cd ~/dnf
- `mrproper`: nix-collect-garbage(s) + switch-to-conf boot
:::

* **enable** `bool` ZSH environment
* **enableForRoot** `bool` Root home manager ZSH configuration
```nix
darkone.console.zsh = {
  enable = false;
  enableForRoot = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.gnome

Pre-configured gnome environment with dependences.

* **enable** `bool` Pre-configured gnome WM
* **enableDashToDock** `bool` Dash to dock plugin
* **enableLightDM** `bool` Enable LightDM instead of GDM
* **enableCaffeine** `bool` Disable auto-suspend
* **enableGsConnect** `bool` Communication with devices
* **xkbVariant** `str` Keyboard variant. Layout is extracted from console keymap.
```nix
darkone.graphic.gnome = {
  enable = false;
  enableDashToDock = false;
  enableLightDM = false;
  enableCaffeine = false;
  enableGsConnect = false;
  xkbVariant = "oss";
}

```

<hr/>

### &#x1F48E; darkone.graphic.supertuxkart

SuperTuxKart with configurations to play in local network.

:::tip
To use in conjonction with homemanager games module!
:::

* **enable** `bool` SuperTuxKart + firewall config + tracks share
* **isNfsServer** `bool` NFS server (share tracks), default is the main NFS server. (wip, enable on main server)
```nix
darkone.graphic.supertuxkart = {
  enable = false;
  isNfsServer = isMainNfsServer;
}

```

<hr/>

### &#x1F48E; darkone.graphic.virt-manager

Virt manager + viewer with spice, win-virtio and ovmf.

* **enable** `bool` Virt manager with dependencies
```nix
darkone.graphic.virt-manager.enable = false;

```

<hr/>

### &#x1F48E; darkone.graphic.virtualbox

Virtualbox host installation.

* **enable** `bool` Pre-configured virtualbox installation
* **enableExtensionPack** `bool` Enable extension pack (causes recompilations)
```nix
darkone.graphic.virtualbox = {
  enable = false;
  enableExtensionPack = false;
}

```

<hr/>

### &#x1F48E; darkone.service.adguardhome

Full-configured AdGuard Home for local gateway / router.

:::note
This configuration reads the `network` conf in `config.yaml` file.
It uses the [DNF dnsmasq module](/ref/modules/#-darkoneservicednsmasq) as upstream DNS and DHCP.
:::

* **enable** `bool` Enable local adguardhome service
```nix
darkone.service.adguardhome.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.audio

Audio services: alsa, pulse (not jack for the moment).

* **enable** `bool` Enable sound system
```nix
darkone.service.audio.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.auth

DNF SSO with Authelia.

* **enable** `bool` Enable local SSO with Authelia (and LLDAP)
```nix
darkone.service.auth.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.beets

Media library management system for obsessive music geeks.

:::tips
Beets service is hosted by "common-files" user.
```sh
su - common-files
beets import [dir]
```
:::

* **enable** `bool` Enable beets for common-files
* **enableService** `bool` Enable beets service (incoming music -&gt; shared music dir)
```nix
darkone.service.beets = {
  enable = false;
  enableService = false;
}

```

<hr/>

### &#x1F48E; darkone.service.borg

Borg backup module with DNF configuration.

Default directories to backup:

```
/nfs/srv -> /mnt/backup/borg/nfs/srv
<services_dirs> -> /mnt/backup/borg/services/
<db_dumps> -> /mnt/backup/borg/databases/
```

:::note
The officially selected solution is Restic, which will be more appropriate and integrated with DNF.
If you prefer borg, this module is still operational.
:::

* **enable** `bool` Enable borg backup service
* **enableDryRun** `bool` Dry Run (try)
* **extraBackups** `str` Main backup target root path
* **enableServicesBackup** `bool` Backup important files of local services (wip)
* **enableDatabasesBackup** `bool` Backup local services databases (wip)
* **enableWaitRemoteFs** `bool` Trigger the borg service only if remote-fs service is started
* **enableNfsBackup** `bool` Backup the /srv/nfs dir (nfs shared files)
* **systemDirsPaths** `?` System dirs (exports) to include
```nix
darkone.service.borg = {
  enable = false;
  enableDryRun = false;
  extraBackups = "/mnt/backup/borg";
  enableServicesBackup = true;
  enableDatabasesBackup = true;
  enableWaitRemoteFs = true;
  enableNfsBackup = config.darkone.service.nfs.enable;
  systemDirsPaths = ;
}

```

<hr/>

### &#x1F48E; darkone.service.dnsmasq

Pre-configured dnsmasq for local gateway / router.

:::note
This configuration reads the `network` conf in `config.yaml` file.
It is the essential functionality of the local gateway.
:::

* **enable** `bool` Enable local dnsmasq service
```nix
darkone.service.dnsmasq.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.fail2ban

Fail2ban DNF specific module.

* **enable** `bool` Enable fail2ban with DNF specificities
```nix
darkone.service.fail2ban.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.forgejo

A full-configured forgejo git forge.

* **enable** `bool` Enable local forgejo service
```nix
darkone.service.forgejo.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.headscale

A full-configured headscale service for HCS.

* **enable** `bool` Enable headscale DNF service
* **enableGRPC** `bool` Open GRPC TCP port
```nix
darkone.service.headscale = {
  enable = false;
  enableGRPC = false;
}

```

<hr/>

### &#x1F48E; darkone.service.home-assistant

A Home Assistant with some plugins (wip).

* **enable** `bool` Enable home assitant
```nix
darkone.service.home-assistant.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.homepage

Dynamically configured homepage dashboard for your local network.

:::note
For each DNF service enabled, an entry is automatically added to the homepage configuration.
:::

* **enable** `bool` Enable homepage dashboard + httpd + host
* **localServices** `?` Services to add in Local Applications section
* **remoteServices** `?` Services to add in Remote Applications section
* **bookmarks** `?` Replace default bookmarks (links)
* **widgets** `?` Replace default widgets
```nix
darkone.service.homepage = {
  enable = false;
  localServices = [ ];
  remoteServices = [ ];
  bookmarks = [ ];
  widgets = [ ];
}

```

<hr/>

### &#x1F48E; darkone.service.httpd

Nginx httpd simple server with PHP84 (DEPRECATED)

* **enable** `bool` Enable httpd (nginx)
* **enableUserDir** `bool` Enable user dir configuration
* **enablePhp** `bool` Enable PHP 8.4 with useful modules
* **enableVarWww** `bool` Enable http root on /var/www
```nix
darkone.service.httpd = {
  enable = false;
  enableUserDir = false;
  enablePhp = false;
  enableVarWww = false;
}

```

<hr/>

### &#x1F48E; darkone.service.immich

Immich (photo management) full-configured service.

* **enable** `bool` Enable local immich service
* **enableMachineLearning** `bool` Enable machine learning features (face recognition, object detection)
* **enableRedis** `bool` Enable Redis for caching (recommended for performance)
```nix
darkone.service.immich = {
  enable = false;
  enableMachineLearning = false;
  enableRedis = false;
}

```

<hr/>

### &#x1F48E; darkone.service.jitsi-meet

A full-configured jitsi-meet service.

* **enable** `bool` Enable local jitsi-meet service
```nix
darkone.service.jitsi-meet.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.keycloak

A full-configured keycloak IAM service.

* **enable** `bool` Enable keycloak service
* **enableBootstrap** `bool` Enable bootstrap state to set admin password
```nix
darkone.service.keycloak = {
  enable = false;
  enableBootstrap = false;
}

```

<hr/>

### &#x1F48E; darkone.service.matrix

A matrix (synapse) server. (WIP)

* **enable** `bool` Enable matrix (synapse) service
```nix
darkone.service.matrix.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.mattermost

A mattermost server. (WIP)

:::caution
This module works with Mattermost Team Edition but I do not plan
to maintain it because of the removal of the SSO functionality
from the open-source version.
:::

* **enable** `bool` Enable mattermost service
* **enableSmtp** `bool` Enable SMTP to send emails (recommended)
```nix
darkone.service.mattermost = {
  enable = false;
  enableSmtp = true;
}

```

<hr/>

### &#x1F48E; darkone.service.monitoring

Supervision module with prometheus, grafana and node exporter.

:::tip
This module is preconfigured with a configuration that allows you
to monitor the operating system, network activity, resources, and performance.
:::

* **enable** `bool` Enable monitoring with prometheus, grafana and node exporter
* **retentionTime** `str` Durée de rétention des métriques Prometheus
```nix
darkone.service.monitoring = {
  enable = false;
  retentionTime = "15d";
}

```

<hr/>

### &#x1F48E; darkone.service.navidrome

A full-configured navidrome service.

* **enable** `bool` Enable navidrome service
* **enableNfsShare** `bool` Enable music directory NFS share
```nix
darkone.service.navidrome = {
  enable = false;
  enableNfsShare = true;
}

```

<hr/>

### &#x1F48E; darkone.service.ncps

Nix cache proxy with NCPS module.

This module is activated by core. Server and clients are automatically detected.

:::tip
To check if a host contains the local gateway in substituters:

```sh
nix --extra-experimental-features nix-command show-config | grep substituters
telnet <your-gateway> 8501
```
:::

* **enable** `bool` Enable nix cache proxy for packages
* **dataPath** `str` Nix cache proxy cache folder
* **extraOptions** `attrs` services.ncps extra options
```nix
darkone.service.ncps = {
  enable = false;
  dataPath = "/var/cache/ncps";
  extraOptions = { };
}

```

<hr/>

### &#x1F48E; darkone.service.netdata

Netdata supervision module.

:::caution
The interface of this application contains too much encouragement
to use the “pro” version, so it is better to use the “monitoring” module.
:::

* **enable** `bool` Enable netdata application
```nix
darkone.service.netdata.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.nextcloud

Nextcloud full-configured service.

* **enable** `bool` Enable local nextcloud service
* **adminUser** `str` Admin username for Nextcloud
* **adminPassword** `str` Admin password for Nextcloud (change this!)
```nix
darkone.service.nextcloud = {
  enable = false;
  adminUser = "admin";
  adminPassword = "changeme";
}

```

<hr/>

### &#x1F48E; darkone.service.nfs

NFS server + client for home shares.

:::note
This module is enabled if a nfs server is declared in the local network. It creates:

- A share (${srv-dirs.homes}) on the server.
- Mount dirs (/mnt/nfs/homes/[user]) on clients.

The nfs home manager script links xdg directories to mount dirs.
In config.yaml file (hosts):

- Only one host have a service `service.nfs`.
- Clients need `nfsClient = true`.
:::

* **enable** `bool` Enable NFS DNF server (avoid enable manually)
* **serverDomain** `str` NFS Server FQDN
```nix
darkone.service.nfs = {
  enable = hasServer && (isServer || isClient);
  serverDomain = "nfs";
}

```

<hr/>

### &#x1F48E; darkone.service.opencloud

Opencloud full-configured service (wip - not working).

* **enable** `bool` Enable local opencloud service
```nix
darkone.service.opencloud.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.printing

Printers and scanners.

* **enable** `bool` Default useful packages
* **loadAll** `bool` Full printers and scanners
* **enableScanners** `bool` Enable scanners
* **enableHpPrinters** `bool` HP printers only
* **enableManualInstall** `bool` Manual drivers installation
```nix
darkone.service.printing = {
  enable = false;
  loadAll = false;
  enableScanners = false;
  enableHpPrinters = false;
  enableManualInstall = false;
}

```

<hr/>

### &#x1F48E; darkone.service.restic

Restic backup module with DNF configuration.

Default directories to backup:

```
/srv/nfs -> /mnt/backup/restic/srv/nfs
<services_dirs> -> /mnt/backup/services/<services_dirs>
<db_dumps> -> /mnt/backup/databases/<db_dumps>
```

* **enable** `bool` Enable restic backup service
* **enableDryRun** `bool` Dry Run mode
* **enableWaitRemoteFs** `bool` Trigger the restic service only if remote-fs service is started
* **repositoryRoot** `str` Main backup target root path
* **enableServicesBackup** `bool` Backup important files of local services (wip)
* **enableDatabasesBackup** `bool` Backup local services databases (wip)
* **enableNfsBackup** `bool` Backup /srv/nfs/&lt;xxx&gt; dirs (services important files)
* **nfsDirsPaths** `?` NFS dirs (/srv/nfs/&lt;xxx&gt;) to include in backup configuration
```nix
darkone.service.restic = {
  enable = false;
  enableDryRun = false;
  enableWaitRemoteFs = true;
  repositoryRoot = "/mnt/backup/restic";
  enableServicesBackup = true;
  enableDatabasesBackup = true;
  enableNfsBackup = config.darkone.service.nfs.enable;
  nfsDirsPaths = ;
}

```

<hr/>

### &#x1F48E; darkone.service.syncthing

The syncthing service for a device. (WIP)

:::note
Enable the [home manager syncthing module](https://darkone-linux.github.io/ref/modules/#-darkonehomesyncthing)
to allow users to use syncthing with their account.
:::

* **enable** `bool` Enable local syncthing service
* **ldapServerHost** `str` Users service (lldap)
* **ldapServerPort** `str` Users service (lldap)
```nix
darkone.service.syncthing = {
  enable = false;
  ldapServerHost = "${zone.gateway.hostname}.${zone.domain}";
  ldapServerPort = "3890";
}

```

<hr/>

### &#x1F48E; darkone.service.tailscale

Tailscale client service for HCS.

:::note
A tailscale client to connect an external host to HCS.
Do not use it to connect a gateway for a tailnet subnet.
:::

* **enable** `bool` Enable tailscale client to connect HCS
* **isGateway** `bool` This tailscale node is a subnet gateway
* **isExitNode** `bool` Configure this client as exit node
```nix
darkone.service.tailscale = {
  enable = false;
  isGateway = false;
  isExitNode = false;
}

```

<hr/>

### &#x1F48E; darkone.service.users

LLDAP service for DNF SSO (WIP).

* **enable** `bool` Enable local user management with LLDAP (SSO)
```nix
darkone.service.users.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.vaultwarden

A full-configured vaultwarden server (wip).

* **enable** `bool` Enable local Vaultwarden service
```nix
darkone.service.vaultwarden.enable = false;

```

<hr/>

### &#x1F48E; darkone.system.core

The core DNF module.

:::danger[Required module]
This module is enabled by default (required by DNF configuration).
It is required for the proper functioning of every NixOS computer on the local network.
:::

* **enableBoost** `bool` Enable overclocking, corectl
* **enableAutoSuspend** `bool` Enable automatic suspend (for laptops, ignored if disableSuspend is true)
* **disableSuspend** `bool` Full suspend disable (for servers)
* **enableCommonFilesUser** `bool` Enable the common-files user used by several services
* **enable** `bool` Darkone framework core system (activated by default)
* **enableSystemdBoot** `bool` Enable the default boot loader
* **enableFstrim** `bool` SSD optimisation with fstrim
* **enableFirewall** `bool` Enable firewall (default true)
* **enableSops** `bool` Enable sops dnf module (default true)
* **enableFlatpak** `bool` Enable flatpak DNF configuration (only for graphic environments)
```nix
darkone.system.core = {
  enableBoost = false;
  enableAutoSuspend = false;
  disableSuspend = false;
  enableCommonFilesUser = false;
  enable = true;
  enableSystemdBoot = true;
  enableFstrim = true;
  enableFirewall = true;
  enableSops = true;
  enableFlatpak = true;
}

```

<hr/>

### &#x1F48E; darkone.system.documentation

Documentation (man) for developers and admins.

* **enable** `bool` Enable useful technical documentation (man, nixos)
```nix
darkone.system.documentation.enable = false;

```

<hr/>

### &#x1F48E; darkone.system.hardware

Hardware configuration improvements.

* **enable** `bool` Enable hardware optimisations
* **enableIntel** `bool` Enable intel microcode updates
* **enableAmd** `bool` Enable amd microcode updates
```nix
darkone.system.hardware = {
  enable = false;
  enableIntel = false;
  enableAmd = false;
}

```

<hr/>

### &#x1F48E; darkone.system.i18n

Location and lang configuration.

:::note
By default, the configuration of this module adapts to the global configuration usr/config.yaml.
:::

* **enable** `bool` Enable i18n with network zone configuration by default
* **locale** `str` Network locale
* **timeZone** `str` Network time zone
```nix
darkone.system.i18n = {
  enable = false;
  locale = "fr_FR.UTF-8";
  timeZone = "Europe/Paris";
}

```

<hr/>

### &#x1F48E; darkone.system.services

DNF Service registration and configuration.

:::caution[Special internal module]
This module is used to register and configure DNF modules:
- Coordination server client (headscale / tailscale)
- Reverse proxies (caddy)
- Homepage registrations
- DNS entries
- folders and files to backup
:::

* **enable** `bool` Enable DNF services manager to register and expose services
* **enable** `bool` Enable service proxy
* **isPublic** `bool` Public service accessed from internet
* **service** `str` Domain name for the service
* **title** `str` Display name in homepage
* **description** `str` Service description for homepage
* **icon** `str` Icon name for homepage (https://gethomepage.dev/configs/services/#icons)
* **global** `bool` Global service is accessible on Internet
* **noRobots** `bool` Prevent robots from scanning if global is true
* **fqdn** `str` Calculated FQDN or the service before the reverse proxy
* **href** `str` Calculated URL of the service before the reverse proxy
* **ip** `str` Calculated IP to contact the service
* **displayOnHomepage** `bool` Display a link on homepage
* **dirs** `?` Service persistant dirs
* **files** `?` Service persistant files
* **dbDirs** `?` Service persistant dirs with database(s)
* **dbFiles** `?` Service database file(s)
* **varDirs** `?` Variable secondary files (log, cache, etc.)
* **mediaDirs** `?` Service media dirs (pictures, videos, big files)
* **enable** `bool` Whether to create virtualHost configuration (false for services that manage their own)
* **defaultService** `bool` Is the default service
* **servicePort** `?` Service internal port
* **extraConfig** `lines` Extra caddy virtualHost configuration
* **scheme** `str` Internal service scheme (http / https)
```nix
darkone.system.services = {
  enable = false;
  enable = false;
  isPublic = false;
  service = "";
  title = "";
  description = "";
  icon = "";
  global = false;
  noRobots = true;
  fqdn = "";
  href = "";
  ip = "";
  displayOnHomepage = true;
  dirs = [ ];
  files = [ ];
  dbDirs = [ ];
  dbFiles = [ ];
  varDirs = [ ];
  mediaDirs = [ ];
  enable = true;
  defaultService = false;
  servicePort = null;
  extraConfig = "";
  scheme = "https";
}

```

<hr/>

### &#x1F48E; darkone.system.sops

DNF sops, passwords and secrets management

:::danger[Critical module]
This module is enabled by default in core module.
It is recommended to keep it enabled and configure it (`just passwd*` commands).
:::

* **enable** `bool` Enable sops automated configuration for DNF
```nix
darkone.system.sops.enable = false;

```

<hr/>

### &#x1F48E; darkone.system.srv-dirs

* **enableNfs** `bool` Enable nfs service paths (nfs/common, nfs/homes)
* **enableMedias** `bool` Enable media services paths (medias/[videos|music|incomming/...])
* **enable** `bool` Enable srv dirs, create the root dir (default /srv)
* **root** `str` Root dir for persistant data (/srv)
* **nfs** `str` NFS root directory (/srv/nfs)
* **homes** `str` Directory for shared homes (/srv/nfs/homes)
* **common** `str` Shared common directory (/srv/nfs/common linked to ~/Public)
* **medias** `str` Medias root dir (/srv/medias)
* **music** `str` Shared music files directory (/srv/medias/music)
* **videos** `str` Shared video files directory (/srv/medias/videos)
* **incoming** `str` Shared incoming directory (/srv/medias/incoming write access)
* **incomingMusic** `str` Shared incoming directory (/srv/medias/incoming/music write access)
* **incomingVideos** `str` Shared incoming directory (/srv/medias/incoming/videos write access)
```nix
darkone.system.srv-dirs = {
  enableNfs = false;
  enableMedias = false;
  enable = cfg.enableNfs || cfg.enableMedias;
  root = "/srv";
  nfs = "";
  homes = "";
  common = "";
  medias = "";
  music = "";
  videos = "";
  incoming = "";
  incomingMusic = "";
  incomingVideos = "";
}

```

<hr/>

### &#x1F48E; darkone.user.build

Build users from DNF configuration.

:::danger[Required module]
This module is enabled by default (required by DNF configuration).
:::

* **enable** `bool` Users common builder (enabled by default)
```nix
darkone.user.build.enable = true;

```

<hr/>

### &#x1F48E; darkone.user.root

Root user specific settings

```nix

```

<hr/>



## Home Manager modules

:::note
**A home manager module** works with [home manager](https://github.com/nix-community/home-manager) profiles.
:::

### &#x1F3E0; darkone.home.advanced

Home profile for advanced users (computer scientists, developers, admins).

* **enable** `bool` Enable advanced user features
* **enableTools** `bool` Various tools for advanced users
* **enableAdmin** `bool` Enable administrator features (network, os tools)
* **enableNixAdmin** `bool` Enable nix administration features
* **enableDeveloper** `bool` Enable tools for developer
* **enableEssentials** `bool` Frequently used tools
```nix
darkone.home.advanced = {
  enable = false;
  enableTools = false;
  enableAdmin = false;
  enableNixAdmin = false;
  enableDeveloper = true;
  enableEssentials = true;
}

```

<hr/>

### &#x1F3E0; darkone.home.education

Several graphical education packages.

* **enableBaby** `bool` Education software for babies (&lt;=6 yo)
* **enableChild** `bool` Education software for children (6-12 yo)
* **enableStudent** `bool` Education software for teenagers and adults (&gt;=12 yo)
* **enableMath** `bool` Math tools and apps
* **enableMusic** `bool` Music tools and apps
* **enableScience** `bool` Scientific tools and apps
* **enableDraw** `bool` Draw tools and apps
* **enableLang** `bool` Lang tools and apps
* **enableMisc** `bool` Misc tools and apps (general, training...)
* **enableComputer** `bool` Computing tools and apps (klavaro, etc.)
```nix
darkone.home.education = {
  enableBaby = false;
  enableChild = false;
  enableStudent = false;
  enableMath = true;
  enableMusic = true;
  enableScience = true;
  enableDraw = true;
  enableLang = true;
  enableMisc = true;
  enableComputer = true;
}

```

<hr/>

### &#x1F3E0; darkone.home.games

Several graphical game packages.

* **enableBaby** `bool` Games for babies (&lt;=6 yo)
* **enableChild** `bool` Games for children (6-12 yo)
* **enableTeenager** `bool` Games for teenagers and adults (&gt;=12 yo)
* **enable3D** `bool` More 3D Games
* **enableCli** `bool` Cli Games
* **enableStk** `bool` SuperTuxKart (only)
* **stkServer** `str` STK server domain name
```nix
darkone.home.games = {
  enableBaby = false;
  enableChild = false;
  enableTeenager = false;
  enable3D = false;
  enableCli = false;
  enableStk = false;
  stkServer = "osConfig.darkone.service.nfs.serverDomain";
}

```

<hr/>

### &#x1F3E0; darkone.home.gnome

Gnome tweaks for home manager.

* **enable** `bool` Enable gnome settings for home manager
* **hideTechnicalIcons** `bool` Hide some icons for beginners / children / babies
```nix
darkone.home.gnome = {
  enable = false;
  hideTechnicalIcons = false;
}

```

<hr/>

### &#x1F3E0; darkone.home.imagery

Image processing softwares (gimp, geeqie, pinta + blender, inkscape, krita...).

* **enable** `bool` Imagery creation
* **enablePro** `bool` Additional image processing software for professionals
* **enableBeginner** `bool` Additional image processing software for beginners
* **enable3D** `bool` 3D softwares
* **enableCAD** `bool` CAD softwares
```nix
darkone.home.imagery = {
  enable = false;
  enablePro = false;
  enableBeginner = false;
  enable3D = false;
  enableCAD = false;
}

```

<hr/>

### &#x1F3E0; darkone.home.mime

Mime types DNF module. (wip)

:::note
This module define default applications depending on user profile. For example, markdown editor for...
- Beginner (default): apostrophe, gnome text editor...
- Advanced: zed, vim, vscode...
:::

* **enable** `bool` Enable DNF default applications update
* **enableAdvanced** `bool` Update the default applications for advanced profiles
```nix
darkone.home.mime = {
  enable = false;
  enableAdvanced = false;
}

```

<hr/>

### &#x1F3E0; darkone.home.music

Graphical music and sound creation apps.

* **enable** `bool` Music creation home module
* **enablePro** `bool` Hard tools for professionals (rose, ardour...)
* **enableFun** `bool` Fun audio tools (mixxx...)
* **enableCli** `bool` Command line audio tools (mpg123, cmus, moc...)
* **enableDev** `bool` Audio software for developers (lilypond...)
* **enableMpd** `bool` MPD daemon and players (mpd, ncmpcpp...)
* **enableEasy** `bool` Easy tools instead of efficient (gnome-music vs audacious...)
* **enableTools** `bool` Audio tools / editors (audacity...)
* **enableScore** `bool` Score softwares (musescore...)
* **enableCreator** `bool` Creation tools for beginners (lmms, hydrogen...)
```nix
darkone.home.music = {
  enable = false;
  enablePro = false;
  enableFun = false;
  enableCli = false;
  enableDev = false;
  enableMpd = false;
  enableEasy = false;
  enableTools = false;
  enableScore = false;
  enableCreator = false;
}

```

<hr/>

### &#x1F3E0; darkone.home.office

Common tools for office desktop.

* **enable** `bool` Default useful packages
* **enableEssentials** `bool` Essential tools
* **enableTools** `bool` Little (gnome) tools (iotas, dialect, etc.)
* **enableProductivity** `bool` Productivity apps (obsidian, time management, projects, etc.)
* **enableCalendarContacts** `bool` Gnome calendar, contacts and related apps
* **enableCommunication** `bool` Communication tools
* **enableOffice** `bool` Office packages (libreoffice)
* **enableFirefox** `bool` Enable firefox
* **enableChromium** `bool` Enable chromium
* **enableBrave** `bool` Enable Brave Browser
* **enableEmail** `bool` Email management packages (thunderbird)
* **huntspellLang** `str` Huntspell Lang (https://mynixos.com/nixpkgs/packages/hunspellDicts)
```nix
darkone.home.office = {
  enable = false;
  enableEssentials = true;
  enableTools = false;
  enableProductivity = false;
  enableCalendarContacts = false;
  enableCommunication = false;
  enableOffice = true;
  enableFirefox = true;
  enableChromium = false;
  enableBrave = false;
  enableEmail = false;
  huntspellLang = "en-us";
}

```

<hr/>

### &#x1F3E0; darkone.home.syncthing

Home sync module. (WIP)

* **enable** `bool` Enable local syncthing service
* **enableTray** `bool` Enable syncthing tray app / icon
```nix
darkone.home.syncthing = {
  enable = false;
  enableTray = true;
}

```

<hr/>

### &#x1F3E0; darkone.home.video

Video tools and apps.

* **enable** `bool` Video creation and tools home module
* **enableTools** `bool` Video tools for professionals
* **enableEditing** `bool` Video editing tools (kdenlive...)
* **enableCreator** `bool` Video creator tools (obs...)
* **enableUnfree** `bool` Unfree video apps (davinci...)
```nix
darkone.home.video = {
  enable = false;
  enableTools = false;
  enableEditing = false;
  enableCreator = false;
  enableUnfree = false;
}

```

<hr/>

### &#x1F3E0; darkone.home.zed

* **enable** `bool` Preconfigured ZED editor
* **enableAssistant** `bool` Enable AI Assistant
```nix
darkone.home.zed = {
  enable = false;
  enableAssistant = false;
}

```

<hr/>

