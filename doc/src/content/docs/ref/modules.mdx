---
title: Modules
sidebar:
  order: 1
  badge:
    text: New
    variant: tip
---

## Mixin modules

:::note
**A mixin module** defines a collection of standard modules with a consistent common configuration.
:::

### &#x1F4E6; darkone.host.desktop

A full desktop configuration with gnome, multimedia and office tools.

* **enable** `bool` Desktop optimized host configuration
```nix
darkone.host.desktop.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.gateway

The main gateway / router of local network.

:::tip[A ready-to-use gateway!]
The gateway is configured in `usr/config.yaml` file.
Additional enabled services (homepage, adguardhome, forgejo, ncps...)
are automatically configured with consistent network plumbing on the
gateway and all machines on the local network.
:::

* **enable** `bool` Enable gateway features for the current host (dhcp, dns, proxy, etc.)
* **enableFail2ban** `bool` Enable fail2ban service
* **enableAdguardhome** `bool` Enable pre-configured Aguard Home service
* **enableNcps** `bool` Enable the proxy cache for packages
* **enableLldap** `bool` Enable pre-configured lldap service (additional users &amp; groups)
```nix
darkone.host.gateway = {
  enable = false;
  enableFail2ban = true;
  enableAdguardhome = builtins.hasAttr "adguardhome" host.services;
  enableNcps = builtins.hasAttr "ncps" host.services;
  enableLldap = builtins.hasAttr "lldap" host.services;
}

```

<hr/>

### &#x1F4E6; darkone.host.laptop

Desktop config + laptop specific tools & configuration.

* **enable** `bool` Laptop optimized host configuration
```nix
darkone.host.laptop.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.minimal

Every host configuration is based on this minimal config.

:::caution[Services declaration]
A number of services (immich, nextcloud, forgejo, etc.) can be declared in the configuration `usr/config.yaml`
of each host, regardless of its type (server, laptop, desktop, etc.). **It is advisable to declare them in the
yaml file so that the service is visible across the entire network!**
:::

* **enable** `bool` Minimal host configuration
* **secure** `bool` Prefer more secure options (disable mutable users...)
* **enableHomepage** `bool` Enable the auto-configured homepage service
* **enableForgejo** `bool` Enable pre-configured forgejo git forge service
* **enableImmich** `bool` Enable pre-configured immich service
* **enableNextcloud** `bool` Enable pre-configured nextcloud service
* **enableNetdata** `bool` Enable pre-configured Netdata service
* **enableMonitoring** `bool` Enable pre-configured monitoring service (prometheus, grafana)
```nix
darkone.host.minimal = {
  enable = false;
  secure = false;
  enableHomepage = attrsets.hasAttrByPath [ "services" "homepage" ] host;
  enableForgejo = attrsets.hasAttrByPath [ "services" "forgejo" ] host;
  enableImmich = attrsets.hasAttrByPath [ "services" "immich" ] host;
  enableNextcloud = attrsets.hasAttrByPath [ "services" "nextcloud" ] host;
  enableNetdata = attrsets.hasAttrByPath [ "services" "netdata" ] host;
  enableMonitoring = attrsets.hasAttrByPath [ "services" "monitoring" ] host;
}

```

<hr/>

### &#x1F4E6; darkone.host.portable

Portable configuration for a bootable USB drive containing a NixOS machine from the local network.

* **enable** `bool` Portable host configuration for usb keys
```nix
darkone.host.portable.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.server

Improved configuration for servers (minimal, no sleep, watchdog...).

:::caution[Emergency mode is disabled]
We prefer the system to attempt to continue booting so
that we can hopefully still access it remotely. (cf. srvos)
:::

* **enable** `bool` Server host minimal configuration
* **enableWatchdog** `bool` Enable systemd watchdog
```nix
darkone.host.server = {
  enable = false;
  enableWatchdog = true;
}

```

<hr/>

### &#x1F4E6; darkone.host.start-img

Start image generator for new hosts (for iso image only).

* **enable** `bool` Start minimal iso image
```nix
darkone.host.start-img.enable = false;

```

<hr/>

### &#x1F4E6; darkone.host.vm

Virtual machines guest tools.

* **enableVirtualbox** `bool` Virtualbox client
* **enableXen** `bool` Xen client
```nix
darkone.host.vm = {
  enableVirtualbox = false;
  enableXen = false;
}

```

<hr/>

### &#x1F4E6; darkone.profile.advanced

Profile for advanced users (computer scientists, developers, admins).

:::note[Host profile vs Home profile]
This module enables features for all users of the system.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Advanced user (admin sys, developper)
```nix
darkone.profile.advanced.enable = false;

```

<hr/>

### &#x1F4E6; darkone.profile.children

Features for childs and babies.

:::note[Host profile vs Home profile]
This module enables features for all users of the system.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Children softwares
```nix
darkone.profile.children.enable = false;

```

<hr/>

### &#x1F4E6; darkone.profile.office

Graphic environment with office softwares.

:::note[Host profile vs Home profile]
This module enables features for all users of the system.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Graphic environment with office softwares
```nix
darkone.profile.office.enable = false;

```

<hr/>

### &#x1F4E6; darkone.profile.teenager

Features for teenagers.

:::note[Host profile vs Home profile]
This module enables features for all users of the system.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Teenager softwares
```nix
darkone.profile.teenager.enable = false;

```

<hr/>



## Standard modules

:::note
**A standard module** contains auto-configured features.
:::

### &#x1F48E; darkone.admin.nix

NixOS configuration for the local LAN administrator computer.

* **enable** `bool` Enable NIX configuration builder tools
* **enableNh** `bool` Enable nix helper (nh) management tool
```nix
darkone.admin.nix = {
  enable = false;
  enableNh = false;
}

```

<hr/>

### &#x1F48E; darkone.console.git

A pre-configured git environment.

:::tip[Git shortcuts]
- `git hdf` (history diff): select a commit to display diff.
- `git tree`: history tree.
- `git tre`: history with files.
- `git treee`: history with commit messages.
- `git hist`: tree alternative.
:::

* **enable** `bool` Pre-configured git environment
```nix
darkone.console.git.enable = false;

```

<hr/>

### &#x1F48E; darkone.console.packages

Some useful console only softwares.

* **enable** `bool` Vim, less, zip, unzip, tree, wget...
* **enableAdditional** `bool` Findutils, fzf, git, htop, neofetch, ranger...
```nix
darkone.console.packages = {
  enable = false;
  enableAdditional = false;
}

```

<hr/>

### &#x1F48E; darkone.console.pandoc

Pandoc with texlive and exiftool utils + gentium fonts.

* **enable** `bool` Pre-configured pandoc environment
```nix
darkone.console.pandoc.enable = false;

```

<hr/>

### &#x1F48E; darkone.console.zsh

A full zsh installation with aliases, bindkeys and optimized prompt.

:::tip[Some shortcuts]
- `l`, `la`, `ll`: ls with options
- `vz`: vim + fzf
- `nx`: cd /etc/nixos
- `nf`: nixfmt
- `nc`: deadnix
- `dnf`: cd /home/nix/dnf
- `mrproper`: nix-collect-garbage(s) + switch-to-conf boot
- `treef`: tree with files (eza)
- `treed`: tree only dirs (eza)
:::

* **enable** `bool` ZSH environment
* **enableForRoot** `bool` Root home manager ZSH configuration
```nix
darkone.console.zsh = {
  enable = false;
  enableForRoot = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.education

Graphical education packages.

:::note
These programs are enabled for all user profiles.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Default useful packages
* **enableBaby** `bool` Software for babies (&lt;=6 yo)
* **enableChildren** `bool` Software for children (6-12 yo)
* **enableTeenager** `bool` Software for teenagers and adults (&gt;=12 yo)
```nix
darkone.graphic.education = {
  enable = false;
  enableBaby = false;
  enableChildren = false;
  enableTeenager = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.games

Several graphical game packages.

:::note
These programs are installed for all user profiles.
Use HomeManager profiles to provide software tailored to each user (admin, advanced, student, child, teenager, etc.).
:::

* **enable** `bool` Enable game packages (please select age group)
* **enableBaby** `bool` Games for babies (&lt;=6 yo)
* **enableChildren** `bool` Games for children (6-12 yo)
* **enableTeenager** `bool` Games for teenagers and adults (&gt;=12 yo)
```nix
darkone.graphic.games = {
  enable = false;
  enableBaby = false;
  enableChildren = false;
  enableTeenager = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.gnome

Pre-configured gnome environment with dependences.

* **enable** `bool` Pre-configured gnome WM
* **enableDashToDock** `bool` Dash to dock plugin
* **enableLightDM** `bool` Enable LightDM instead of GDM
* **enableCaffeine** `bool` Disable auto-suspend
* **enableGsConnect** `bool` Communication with devices
* **enableSuspend** `bool` Enable suspend, sleep, hybernate features (usefull for laptops)
* **enableMoreGnomeApps** `bool` More gnome apps for regular users (music, calendar, maps, contacts...)
* **enableTechnicalFeatures** `bool` Gnome apps for techniciens (binary, collision, apostrophe...)
* **enableGames** `bool` Enable gnome games
* **xkbVariant** `str` Keyboard variant. Layout is extracted from console keymap.
```nix
darkone.graphic.gnome = {
  enable = false;
  enableDashToDock = false;
  enableLightDM = false;
  enableCaffeine = false;
  enableGsConnect = false;
  enableSuspend = false;
  enableMoreGnomeApps = false;
  enableTechnicalFeatures = false;
  enableGames = false;
  xkbVariant = "";
}

```

<hr/>

### &#x1F48E; darkone.graphic.imagery

Image processing softwares (gimp, geeqie, pinta + blender, inkscape, krita...).

* **enable** `bool` Imagery creation
* **enablePro** `bool` Additional image processing software for professionals
```nix
darkone.graphic.imagery = {
  enable = false;
  enablePro = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.music

Music creation packages and modules.

* **enable** `bool` Music creation module
* **enablePro** `bool` Music creation softwares for pros (wip)
```nix
darkone.graphic.music = {
  enable = false;
  enablePro = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.obsidian

Preconfigured obsidian installation.

* **enable** `bool` Default useful packages
```nix
darkone.graphic.obsidian.enable = false;

```

<hr/>

### &#x1F48E; darkone.graphic.office

Common tools for office desktop.

* **enable** `bool` Default useful packages
* **enableLibreOffice** `bool` Office packages (libreoffice)
* **enableInternet** `bool` Internet packages (firefox)
* **enableEmail** `bool` Email management packages (thunderbird)
```nix
darkone.graphic.office = {
  enable = false;
  enableLibreOffice = true;
  enableInternet = true;
  enableEmail = true;
}

```

<hr/>

### &#x1F48E; darkone.graphic.video

Video creation tools.

* **enable** `bool` Video creation (kdenlive...)
* **enablePro** `bool` Video softwares for professionals
```nix
darkone.graphic.video = {
  enable = false;
  enablePro = false;
}

```

<hr/>

### &#x1F48E; darkone.graphic.virt-manager

Virt manager + viewer with spice, win-virtio and ovmf.

* **enable** `bool` Virt manager with dependencies
```nix
darkone.graphic.virt-manager.enable = false;

```

<hr/>

### &#x1F48E; darkone.graphic.virtualbox

Virtualbox host installation.

* **enable** `bool` Pre-configured virtualbox installation
* **enableExtensionPack** `bool` Enable extension pack (causes recompilations)
```nix
darkone.graphic.virtualbox = {
  enable = false;
  enableExtensionPack = false;
}

```

<hr/>

### &#x1F48E; darkone.service.adguardhome

Full-configured AdGuard Home for local gateway / router.

:::note
This configuration reads the `network` conf in `config.yaml` file.
It uses the [DNF dnsmasq module](/ref/modules/#-darkoneservicednsmasq) as upstream DNS and DHCP.
:::

* **enable** `bool` Enable local adguardhome service
* **domainName** `str` Domain name for Adguard Home, registered in nginx &amp; hosts
```nix
darkone.service.adguardhome = {
  enable = false;
  domainName = "adguardhome";
}

```

<hr/>

### &#x1F48E; darkone.service.audio

Audio services: alsa, pulse (not jack for the moment).

* **enable** `bool` Enable sound system
```nix
darkone.service.audio.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.dnsmasq

Pre-configured dnsmasq for local gateway / router.

:::note
This configuration reads the `network` conf in `config.yaml` file.
It is the essential functionality of the local gateway.
:::

* **enable** `bool` Enable local dnsmasq service
```nix
darkone.service.dnsmasq.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.forgejo

A full-configured forgejo git forge.

* **enable** `bool` Enable local forgejo service
* **domainName** `str` Domain name for the forge, registered in forgejo, nginx &amp; hosts
* **appName** `str` Default title for the local GIT forge
```nix
darkone.service.forgejo = {
  enable = false;
  domainName = "forgejo";
  appName = "The local forge";
}

```

<hr/>

### &#x1F48E; darkone.service.home-assistant

A Home Assistant with some plugins (wip).

* **enable** `bool` Enable home assitant
```nix
darkone.service.home-assistant.enable = false;

```

<hr/>

### &#x1F48E; darkone.service.homepage

Dynamically configured homepage dashboard for your local network.

:::note
For each DNF service enabled, an entry is automatically added to the homepage configuration.
:::

* **enable** `bool` Enable homepage dashboard + nginx + host
* **domainName** `str` Domain name for homepage (default is hostname)
* **adminServices** `?` Services to add in Administration section
* **appServices** `?` Services to add in Applications section
* **bookmarks** `?` Replace default bookmarks (links)
* **widgets** `?` Replace default widgets
```nix
darkone.service.homepage = {
  enable = false;
  domainName = "host.hostname";
  adminServices = [ ];
  appServices = [ ];
  bookmarks = [ ];
  widgets = [ ];
}

```

<hr/>

### &#x1F48E; darkone.service.httpd

Httpd (nginx) server with PHP84.

* **enable** `bool` Enable httpd (nginx)
* **enableUserDir** `bool` Enable user dir configuration
* **enablePhp** `bool` Enable PHP 8.4 with useful modules
* **enableVarWww** `bool` Enable http root on /var/www
* **enable** `bool` Enable service proxy
* **service** `bool` Display a link on homepage
* **domainName** `str` Domain name for the service
* **displayName** `str` Display name in homepage
* **description** `str` Service description for homepage
* **icon** `str` Icon name for homepage (https://dashboardicons.com/)
* **manageVirtualHost** `bool` Whether to create nginx virtualHost configuration (false for services that manage their own)
* **defaultVirtualHost** `bool` Default nginx virtualhost
* **proxyPort** `?` Service internal port
* **extraConfig** `lines` Extra nginx virtualHost configuration
* **locations** `str` Proxy pass URL
* **proxyWebsockets** `bool` Enable WebSocket support
* **extraConfig** `lines` Extra location configuration
```nix
darkone.service.httpd = {
  enable = false;
  enableUserDir = false;
  enablePhp = false;
  enableVarWww = false;
  enable = false;
  service = true;
  domainName = "name";
  displayName = "name";
  description = "name";
  icon = "name";
  manageVirtualHost = true;
  defaultVirtualHost = false;
  proxyPort = null;
  extraConfig = ;
  locations = "";
  proxyWebsockets = false;
  extraConfig = "";
}

```

<hr/>

### &#x1F48E; darkone.service.immich

Immich (photo management) full-configured service.

* **enable** `bool` Enable local immich service
* **domainName** `str` Domain name for immich, registered in nginx &amp; hosts
* **enableMachineLearning** `bool` Enable machine learning features (face recognition, object detection)
* **enableRedis** `bool` Enable Redis for caching (recommended for performance)
```nix
darkone.service.immich = {
  enable = false;
  domainName = "immich";
  enableMachineLearning = false;
  enableRedis = false;
}

```

<hr/>

### &#x1F48E; darkone.service.lldap

Pre-configured lldap configuration for users and groups.

:::caution[Work in progress user management]
This module does not yet allow for the management of system users and groups.
This feature is currently under consideration.
:::

* **enable** `bool` Enable local lldap service
* **openLdapPort** `bool` Open the lldap port (default is 3890)
* **domainName** `str` Domain name for lldap, registered in forgejo, nginx &amp; hosts
```nix
darkone.service.lldap = {
  enable = false;
  openLdapPort = false;
  domainName = "users";
}

```

<hr/>

### &#x1F48E; darkone.service.monitoring

Supervision module with prometheus, grafana and node exporter.

:::tip
This module is preconfigured with a configuration that allows you
to monitor the operating system, network activity, resources, and performance.
:::

* **enable** `bool` Enable monitoring with prometheus, grafana and node exporter
* **domainName** `str` Domain name for monitoring, registered in nginx &amp; hosts
* **retentionTime** `str` Durée de rétention des métriques Prometheus
```nix
darkone.service.monitoring = {
  enable = false;
  domainName = "monitoring";
  retentionTime = "15d";
}

```

<hr/>

### &#x1F48E; darkone.service.ncps

Nix cache proxy with NCPS module.

:::tip
To check if a host contains the local gateway in substituters:

```sh
nix --extra-experimental-features nix-command show-config | grep substituters
telnet <your-gateway> 8501
```
:::

* **enable** `bool` Enable nix cache proxy for packages
* **isClient** `bool` Only enable client configuration
* **dataPath** `str` Nix cache proxy cache folder
* **extraOptions** `attrs` services.ncps extra options
```nix
darkone.service.ncps = {
  enable = false;
  isClient = false;
  dataPath = "/var/cache/ncps";
  extraOptions = { };
}

```

<hr/>

### &#x1F48E; darkone.service.netdata

Netdata supervision module.

:::caution
The interface of this application contains too much encouragement
to use the “pro” version, so it is better to use the “monitoring” module.
:::

* **enable** `bool` Enable netdata application
* **domainName** `str` Domain name for netdata, registered in nginx &amp; hosts
```nix
darkone.service.netdata = {
  enable = false;
  domainName = "netdata";
}

```

<hr/>

### &#x1F48E; darkone.service.nextcloud

Nextcloud full-configured service.

* **enable** `bool` Enable local nextcloud service
* **domainName** `str` Domain name for nextcloud, registered in nextcloud, nginx &amp; hosts
* **adminUser** `str` Admin username for Nextcloud
* **adminPassword** `str` Admin password for Nextcloud (change this!)
```nix
darkone.service.nextcloud = {
  enable = false;
  domainName = "nextcloud";
  adminUser = "admin";
  adminPassword = "changeme";
}

```

<hr/>

### &#x1F48E; darkone.service.printing

Printers and scanners.

* **enable** `bool` Default useful packages
* **loadAll** `bool` Full printers and scanners
* **enableScanners** `bool` Enable scanners
* **enableHpPrinters** `bool` HP printers
* **enableManualInstall** `bool` Manual installation
```nix
darkone.service.printing = {
  enable = false;
  loadAll = true;
  enableScanners = true;
  enableHpPrinters = true;
  enableManualInstall = true;
}

```

<hr/>

### &#x1F48E; darkone.system.core

The core DNF module.

:::danger[Required module]
This module is enabled by default (required by DNF configuration).
It is required for the proper functioning of every NixOS computer on the local network.
:::

* **enable** `bool` Darkone framework core system (activated by default)
* **enableSystemdBoot** `bool` Enable the default boot loader
* **enableFstrim** `bool` SSD optimisation with fstrim
* **enableFirewall** `bool` Enable firewall (default true)
* **enableSops** `bool` Enable sops dnf module (default true)
* **enableGatewayClient** `bool` Configuration optimized for local gateway (ncps client...)
* **enableBoost** `bool` Enable overclocking, corectl
* **enableKmscon** `bool` Enable nerd font for TTY
```nix
darkone.system.core = {
  enable = true;
  enableSystemdBoot = true;
  enableFstrim = true;
  enableFirewall = true;
  enableSops = true;
  enableGatewayClient = true;
  enableBoost = false;
  enableKmscon = false;
}

```

<hr/>

### &#x1F48E; darkone.system.documentation

Documentation (man) for developers and admins.

* **enable** `bool` Enable useful technical documentation (man, nixos)
```nix
darkone.system.documentation.enable = false;

```

<hr/>

### &#x1F48E; darkone.system.hardware

Hardware configuration improvements.

* **enable** `bool` Enable hardware optimisations
* **enableIntel** `bool` Enable intel microcode updates
* **enableAmd** `bool` Enable amd microcode updates
```nix
darkone.system.hardware = {
  enable = false;
  enableIntel = false;
  enableAmd = false;
}

```

<hr/>

### &#x1F48E; darkone.system.i18n

Location and lang configuration.

:::note
By default, the configuration of this module adapts to the global configuration usr/config.yaml.
:::

* **enable** `bool` Enable i18n with network configuration by default
* **locale** `str` Network locale
* **timeZone** `str` Network time zone
```nix
darkone.system.i18n = {
  enable = false;
  locale = "fr_FR.UTF-8";
  timeZone = "Europe/Paris";
}

```

<hr/>

### &#x1F48E; darkone.system.impermanence

Impermanance management module (used by others).

:::caution[DNF impermanence rules]
- `/persist` contains regular files (btrfs+zstd)
- `/persist/databases` contains database files (btrfs+nocow)
- `/persist/medias` contains images, videos and big files (ext4 or btrfs+nocow)
- `/persist/backup/<location>` contains backup files (ext4/xfs)
:::

Recommanded filesystems:

```nix
# Fichiers communs
fileSystems."/persist" = {
device = "/dev/disk/by-label/persist";
fsType = "btrfs";
options = [
"subvol=persist"
"compress=zstd:1" # Niveau 1 = bon compromis vitesse/ratio
"noatime"
"space_cache=v2"
];
neededForBoot = true;
};

# Bases de données : subvolume séparé sans compression
fileSystems."/persist/databases" = {
device = "/dev/disk/by-label/persist";
fsType = "btrfs";
options = [
"subvol=databases"
"nodatacow"  # Désactive COW pour performance DB
"noatime"
];
depends = [ "/persist" ];
};

# Pour /etc/nixos
fileSystems."/etc/nixos" = {
device = "/persist/etc/nixos";
options = [ "bind" ];
depends = [ "/persist" ];
};

# Stockage de médias sur disques séparés
fileSystems."/persist/medias" = {
device = "/dev/disk/by-label/medias";
fsType = "ext4";
options = [
"noatime"        # Pas besoin de mettre à jour atime
"data=writeback" # Performance maximale (safe pour Borg)
];
};

# Backup local (disque externe par exemple)
fileSystems."/persist/backup/local" = {
device = "/dev/disk/by-label/usb-disk";
fsType = "ext4";
options = [
"noatime"        # Pas besoin de mettre à jour atime
"data=writeback" # Performance maximale (safe pour Borg)
];
};
```

* **enable** `bool` Enable impermanence DNF mechanism
* **persistRootDir** `str` Root directory for persistent data
* **extraPersistDirs** `?` Extra regular persistant dirs
* **extraPersistFiles** `?` Extra regular persistant files
* **extraDbPersistDirs** `?` Extra database persistant dirs
* **extraDbPersistFiles** `?` Extra database persistant files
* **extraMediaPersistDirs** `?` Extra media persistant dirs
* **backupLocations** `?` Directories to persist in this backup location
* **files** `?` Files to persist in this backup location
* **persistDirs** `?` Default directories to persist for all users
* **persistFiles** `?` Default files to persist for all users
* **extraUserConfig** `?`
```nix
darkone.system.impermanence = {
  enable = false;
  persistRootDir = "/persist";
  extraPersistDirs = [ ];
  extraPersistFiles = [ ];
  extraDbPersistDirs = [ ];
  extraDbPersistFiles = [ ];
  extraMediaPersistDirs = [ ];
  backupLocations = [ ];
  files = [ ];
  persistDirs = ;
  persistFiles = [ ".zshrc" ];
  extraUserConfig = { };
}

```

<hr/>

### &#x1F48E; darkone.system.sops

DNF sops, passwords and secrets management

:::caution[Essential module]
This module is enabled by default in core module.
It is recommended to keep it enabled and configure it (`just passwd*` commands).
:::

* **enable** `bool` Enable sops automated configuration for DNF
```nix
darkone.system.sops.enable = false;

```

<hr/>

### &#x1F48E; darkone.user.build

Build users from DNF configuration.

:::danger[Required module]
This module is enabled by default (required by DNF configuration).
:::

* **enable** `bool` Users common builder (enabled by default)
```nix
darkone.user.build.enable = true;

```

<hr/>



## Home Manager modules

:::note
**A home manager module** works with [home manager](https://github.com/nix-community/home-manager) profiles.
:::

### &#x1F3E0; darkone.home.zed

* **enable** `bool` Preconfigured ZED editor
```nix
darkone.home.zed.enable = false;

```

<hr/>

