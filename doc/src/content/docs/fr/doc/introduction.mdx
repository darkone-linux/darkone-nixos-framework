---
title: Pr√©sentation du projet
description: A multi-user, multi-host, ready-to-use NixOS configuration
sidebar:
  order: 1
lang: fr
---

import { FileTree } from '@astrojs/starlight/components';

:::tip[Non informaticien ?]
Le [guide de l'utilisateur](/fr/doc/user-guide/) est pour vous !
:::

Une **configuration NixOS** multi-utilisateur, multi-h√¥te et multi-service&nbsp;:

- üî• [D√©claratif, reproductible, immuable](https://nixos.org/).
- üöÄ [Modules](/fr/ref/modules/) pr√™ts √† l‚Äôemploi.
- ‚ùÑÔ∏è [Configuration](https://github.com/darkone-linux/darkone-nixos-framework/blob/main/usr/config.yaml) simple.
- üß© [Organisation](/fr/doc/introduction/#structure) coh√©rente.
- üåé Un [r√©seau complet](#le-r√©seau-dnf).

:::note
Ce projet √©volue en fonction de mes besoins. Si vous souhaitez √™tre inform√© des prochaines versions stables, merci de me le faire savoir sur [GitHub](https://github.com/darkone-linux/darkone-nixos-framework) ou en vous abonnant √† ma [cha√Æne YouTube](https://www.youtube.com/@DarkoneLinux) (FR). Merci !
:::

## Fonctionnalit√©s principales

| | Fonctionnalit√© | Description |
|---|---------------|-------------|
| ‚öôÔ∏è | Tout-automatis√© | Avec [nixos-anywhere](https://github.com/nix-community/nixos-anywhere), [disko](https://github.com/nix-community/disko) et [colmena](https://github.com/zhaofengli/colmena) |
| üë§ | Profils utilisateurs | [Profils](https://github.com/darkone-linux/darkone-nixos-framework/tree/main/dnf/home/profiles) et [modules](/fr/ref/modules/#home-manager-modules) [Home Manager](https://github.com/nix-community/home-manager) (admin, gamer‚Ä¶) |
| üñ•Ô∏è | Profils d‚Äôh√¥tes | [Profils d‚Äôh√¥tes](/fr/ref/modules/#-darkonehostdesktop) (serveurs, n≈ìuds r√©seau, postes de travail‚Ä¶) |
| üåê | VPN Tailnet | [VPN maill√©](https://fr.wikipedia.org/wiki/R%C3%A9seau_maill%C3%A9) avec [headscale](https://headscale.net/) + [tailscale](https://tailscale.com/) + [sous-r√©seaux](#une-configuration-pour-un-r√©seau-complet) |
| üõ°Ô∏è | Stop Publicit√©s | Internet s√©curis√© et sans pub avec [AdguardHome](https://adguard.com/fr/adguard-home/overview.html) |
| üß© | Identit√©s uniques | SSO avec [Kanidm](https://kanidm.com/) et [Vaultwarden](https://github.com/dani-garcia/vaultwarden) |
| ü§ó | Services intelligents | [Immich](https://immich.app/), [Nextcloud](https://nextcloud.com/), [Forgejo](https://forgejo.org/), [Matrix](https://matrix.com/), [Jellyfin](https://jellyfin.org/), [etc.](/fr/ref/modules/#-darkoneserviceadguardhome) |
| üíª | GNOME √©pur√© | H√¥tes NixOS avec [GNOME](https://www.gnome.org/) et applis pr√©-configur√©es |
| üíæ | Sauvegardes 3-2-1 | Sauvegardes [Restic](https://restic.net/) robustes, simplifi√©es, distribu√©es |
| üè† | Page d‚Äôaccueil | Page d‚Äôaccueil automatis√©e pour chaque zone |

## Sous le capot

| | Sp√©cificit√© | Description |
|---|---------------|-------------|
| ‚ùÑÔ∏è | D√©claratif,&nbsp;immuable | Et reproductible gr√¢ce √† [Nix / NixOS](https://nixos.org/) et son √©cosyst√®me |
| üîë | S√©curit√© renforc√©e | Strat√©gie de s√©curit√© simple et fiable, reposant sur [sops-nix](https://github.com/Mic92/sops-nix) |
| üì¶ | Modules complets | [Modules NixOS haut-niveau](/fr/ref/modules/) faciles √† configurer |
| üìê | Architecture | [Coh√©rente, extensible, scalable, personnalisable](/fr/doc/introduction/#structure) |
| ‚ú¥Ô∏è | Proxy inverse | Services distribu√©s √† travers le r√©seau via proxies [Caddy](https://github.com/caddyserver/caddy) |
| üõú | R√©seau automatis√© | Plomberie [dnsmasq](https://thekelleys.org.uk/dnsmasq/doc.html) zero-conf (DNS, DHCP, pare-feu‚Ä¶) |

## Le r√©seau DNF

Cette configuration g√®re tout le r√©seau et ses noeuds :

- Les **zones** contenant chacune une passerelle et des machines.
- Le **VPN** qui englobe les zones et d'autres machines sur internet.

On peut r√©sumer le fonctionnement du r√©seau ainsi :

![R√©seau DNF](../../../../assets/reseau-darkone-2.png)

## Organisation des fichiers

A la racine :

- `dnf` -> modules, users, hosts (framework)
- `usr` -> Projet local (en √©criture)
- `var` -> Fichiers g√©n√©r√©s et logs
- `src` -> Fichiers source du g√©n√©rateur
- `doc` -> Documentation du projet

### Structure

<FileTree collapsed={true}>
- flake.nix Flake du projet
- Justfile Gestion du projet avec [just](/doc/user-manual/#just-commands)
- dnf/ Framework (modules & common files)
  - modules/ [Framework modules](/ref/modules/)
    - standard Modules standards
      - system/ Syst√®me & Mat√©riel
      - console/ Application CLI
      - graphic/ Applications X
      - service/ Services r√©seau
      - admin/ Administration
      - user/ Configurations utilisateurs (hors HM)
    - mixin Macro-modules "Mixins"
      - host/ Profiles d'h√¥tes (desktop, server...)
      - profile/ Compl√©ments aux profils utilisateurs
  - home Configuration Home Manager (HM)
    - modules/ Modules nix (fonctionnalit√©s, programmes)
    - profiles/ Profils : admin, student, advanced...
    - nixos/ Configurations NixOS (hors HM) additionnelles
- **usr/** Configuration sp√©cifique de mon r√©seau
  - config.yaml [Ma config principale](/en/doc/specifications/#the-configuration-file) (en)
  - modules/ Mes modules NixOS, identique √† `dnf/modules`
  - home/ Mes modules HM, identique √† `dnf/home`
  - secrets/ Mes mots de passe
    - secret.yaml Mots de passe et cl√©s SOPS
  - machines/ Confs sp√©cifiques par h√¥te (hardware, etc.)
  - users/ Confs sp√©cifique HM par utilisateur
- var/ Fichiers g√©n√©r√©s
  - log/ Fichiers de log
  - generated/ [Fichiers g√©n√©r√©s](/en/doc/specifications/#the-generator) (en)
    - hosts.nix
    - users.nix
    - network.nix
- src/ Sources du g√©n√©rateur
- doc/ Cette documentation
</FileTree>

### Couches d'abstraction

Les niveaux inf√©rieurs rendent service aux niveaux sup√©rieurs.

![DNF Project layers](../../../../assets/layers.webp)

Ces configurations sont organis√©es par cat√©gories:

- **[Modules standards](/ref/modules/#standard-modules)** simples et faciles √† utiliser.
- **[Modules mixins](/ref/modules/#mixin-modules)** qui englobent plusieurs modules standards.
- **[Profils utilisateur](/doc/specifications/#create-a-user-profile-example)**, configurations [Home Manager](https://github.com/nix-community/home-manager) standards.
- **Outils pour maintenir une configuration qualitative.
